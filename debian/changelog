gem2deb (0.16) UNRELEASED; urgency=medium

  * Add support for a 'nocheck' build profile, and document it in
    README.source. Closes: #632776
  * Add patch from Cédric Boutillier, from a debian-ruby@ discussion from
    2012, that makes gem2tgz pick the most recent (in terms of gem version)
    gem file, instead of just the first one, after running gem fetch.
    Closes: #733171
  * bin/dh-make-ruby: use '.' (current directory) as default target.
    Closes: #777747
  * dh-make-ruby: run wrap-and-sort after generating boilerplate from
    templates. test/unit/dh_make_ruby_test.rb also had to be modified
    to robustify the dependencies extractor. Closes: #784556

 -- Lucas Nussbaum <lucas@debian.org>  Mon, 11 May 2015 21:10:48 +0200

gem2deb (0.15) unstable; urgency=medium

  * dh-make-ruby, debian/ruby-tests.rake for test/unit: add 'test' to the
    $LOAD_PATH by default, and also run tests on test/**/test_*.rb.
    (Closes: #784323)

 -- Antonio Terceiro <terceiro@debian.org>  Wed, 06 May 2015 09:05:36 -0300

gem2deb (0.14) experimental; urgency=medium

  [ Antonio Terceiro ]
  * dh-make-ruby: fix conversion of gem names with uppercase characters into
    debian package names
  * dh_ruby: don't pass LIBDIR into command line when running different
    interpreters while installed system-wide. This avoids extra
    -I/usr/lib/ruby/vendor_ruby in command lines and eases debugging running
    processes for packages that e.g. hang while running their tests.
  * debian/requires-rubygems.overrides it not supported anymore. Patching out
    instances of `require 'rubygems'` is now considered an antipattern.

  [ Sebastien Badia ]
  * Update Vcs-Browser to cgit URL and HTTPS.

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 11 Apr 2015 17:41:31 +0200

gem2deb (0.13) experimental; urgency=medium

  [ Antonio Terceiro ]
  * dh-make-ruby: bump Standards-Version in template to 3.9.6
  * dh-make-ruby: add gem runtime dependencies to Build-Depends: as well
  * TestRunner: when running build time tests, use the full path for extra
    library directories installed in debian/$pkg
  * SetupRbInstaller: copy system copy of setup.rb instead of symlinking. This
    will fail if it's not there.
  * gem2deb: add missing dependency on ruby-setup, since setup.rb is used
    explicitly by gem2deb

  [ Christian Hofstaedtler ]
  * Remove rdoc stamp files at install time

 -- Antonio Terceiro <terceiro@debian.org>  Thu, 09 Apr 2015 12:26:04 +0200

gem2deb (0.12) experimental; urgency=medium

  * dh_ruby: if debian/dh_ruby.{mk,rake} exists, call {make,rake} on it during
    the build. See docs in dh_ruby(1)
  * dh-make-ruby: use a cache based on the output of apt-file to map gem names
    to Debian package names when generating dependencies.
    - add apt-file to Recommends:

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 21 Feb 2015 20:34:04 -0200

gem2deb (0.11) experimental; urgency=medium

  * dh-make-ruby: generate 'Testsuite: autopkgtest-pkg-ruby' to not conflict
    with DEP-8 spec (i.e., if the 'Testsuite' field contains 'autopkgtest',
    then debian/tests/control *must* exist).
    - autopkgtest-pkg-ruby will be handled by autopkgtest and the implicit
      test control data that uses gem2deb-test-runner will be used.
  * improved "usage: " banner in several of the provided programs
  * SetupRbInstaller: always use the system copy of setup.rb
  * Gem2Deb#run: always print command lines being executed. This makes build
    logs much more detailed, what is a good thing.
  * dh-make-ruby: look for test files recursively in generated
    debian/ruby-tests.rake for both test/unit and rspec style tests.
  * dh-make-ruby: gem dependencies will now be included in debian/control
    uncommented and transformed to Debian package names, i.e. foo → ruby-foo,
    except for known exceptions (such as rake and rails initially).

 -- Antonio Terceiro <terceiro@debian.org>  Fri, 06 Feb 2015 15:37:58 -0200

gem2deb (0.10) unstable; urgency=medium

  * gem2deb-test-runner: add '.' to $LOAD_PATH with --autopkgtest
  * dh-make-ruby won't create debian/tests/control anymore since autopkgtest
    will now auto-detect Ruby packages and assume an implicit tests
    definition. debian/tests/control.ex will be created instead, with comments
    explaining to either modify it and rename to control, or delete it.
  * dh-make-ruby: when test/ or spec/ exists, create debian/ruby-tests.rake
    with the appropriate rake invocation to run the tests, instead of being
    insecure and creating files all commented out.
  * install 'gem2deb/rake/testtask.rb' to gem2deb-test-runner instead of
    gem2deb
  * dh-make-ruby: generate uncommented Vcs-* headers in debian/control
  * dh-make-ruby: remove version qualifier from build-dependency on gem2deb to
    remove friction when backporting.

 -- Antonio Terceiro <terceiro@debian.org>  Mon, 08 Sep 2014 14:07:02 -0300

gem2deb (0.9.1) unstable; urgency=medium

  * gem2deb-test-runner now Breaks/Replaces gem2deb < 0.9. (Closes: #759431)

 -- Cédric Boutillier <boutil@debian.org>  Wed, 27 Aug 2014 14:06:00 +0200

gem2deb (0.9.0) unstable; urgency=medium

  * Provide support for DEP-8 autopkgtest (Closes: #637917)
    + split out a gem2deb-test-runner binary package
    + add a Testsuite: autopkgtest field to template debian/control
    + add templates for debian/tests files to propose a syntax/load test
      (Closes: #645357) and run the test suite of the package
  * Make dh-make-ruby idempotent
  * Refactor test_suite creation in dh_make_ruby
    + in particular, use the rake method by default when a spec/ directory is
      present (Closes: #702578)
  * Remove alternative dependency on ruby-interpreter (Closes: #758806)
  * Verify checksums included in the gems and remove checksums.yaml.gz upon
    conversion of the gems to tarballs (Closes: #725348)

 -- Cédric Boutillier <boutil@debian.org>  Tue, 26 Aug 2014 09:12:32 +0200

gem2deb (0.8.0) unstable; urgency=medium

  [Antonio Terceiro]
  * dh_ruby_fixdepends: inject minimum Ruby dependency provided by
    ruby-all-dev in the shared library dependencies. For that, bump dependency
    on ruby-all-dev to (>= 1:2.1.0.3~)
  * test/test_helper.rb: add test/bin to $PATH during tests
  * test/bin/wnpp-check: mock the actual wnpp-check during tests to avoid
    hitting the network

  [Cédric Boutillier]
  * Update sample gems with non obsolete rake rules

 -- Cédric Boutillier <boutil@debian.org>  Mon, 11 Aug 2014 14:22:55 +0200

gem2deb (0.7.6) unstable; urgency=medium

  [ Antonio Terceiro ]
  * extension builder:
    - display build logs in real time
    - show output of mkmf.log on failure

  [ Per Andersson ]
  * dh-make-ruby: if an ITP bug exists, add its number to the generated
    changelog (Closes: #704651)

  [ Cédric Boutillier ]
  * Add a --no-wnpp-check option to dh-make-ruby and gem2deb to prevent
    dh-make-ruby to check the existense of an ITP bug.
  * Add myself to the Uploaders.

 -- Cédric Boutillier <boutil@debian.org>  Wed, 30 Jul 2014 15:39:15 +0200

gem2deb (0.7.5) unstable; urgency=medium

  * Removes mkmf.log installed at the binary extension directory by Rubygems
    on Ruby 2.1 (Closes: #743671)

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 05 Apr 2014 08:59:00 -0300

gem2deb (0.7.4) unstable; urgency=medium

  * dh_ruby: abort builds for unsupported Ruby versions.

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 01 Apr 2014 21:41:47 -0300

gem2deb (0.7.3) unstable; urgency=medium

  * extension_builder: create full vendorarchdir path before building
    extensions. This fixes building extensions for Ruby 2.1

 -- Antonio Terceiro <terceiro@debian.org>  Mon, 31 Mar 2014 12:42:14 -0300

gem2deb (0.7.2) unstable; urgency=medium

  * fix one test to work without Ruby 1.9 support
    - the test was assuming an non-multiarch binary extension installation
      path.

 -- Antonio Terceiro <terceiro@debian.org>  Sun, 30 Mar 2014 13:03:25 -0300

gem2deb (0.7.1) unstable; urgency=medium

  [ Jonas Genannt ]
  * updated standards version in template to current 3.9.5

  [ Christian Hofstaedtler ]
  * Set ruby:Versions to 'all' if possible

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 18 Mar 2014 19:41:20 -0300

gem2deb (0.7.0) unstable; urgency=medium

  [ Antonio Terceiro ]
  * Drop -w (verbose mode) switch from shebang lines
    - that -w does not help us much
    - build logs will become a lot cleaner now
  * dh_ruby: remove blank lines from --help output
  * dh_ruby: install a single gemspec for pure-Ruby packages
    - This single gemspec will be installed at
      /usr/share/rubygems-integration/all and will be made available to all
      interpreters by rubygems-integration >= 1.5. This way when a new
      interpreter is added there is no need to re-upload every package to
      make it seen by that new interpreter rubygems.
  * add ruby-test-unit to Build-Depends
  * dh_ruby: change shebangs from `/usr/bin/env ruby` to `/usr/bin/ruby`
    - multiple interpreters won't be supported for Jessie, and any interpreter
      that is not /usr/bin/ruby will have been installed by hand so we don't
      want system binaries using external interpreters.
  * Add support for running the gem2deb testsuite with autopkgtest
  * Removed hardcoded interpreter versions; use ruby-all-dev instead

  [ Cédric Boutillier ]
  * Make build of C extensions verbose (Closes: #721674)

 -- Antonio Terceiro <terceiro@debian.org>  Wed, 12 Feb 2014 10:01:08 -0300

gem2deb (0.6.1) unstable; urgency=low

  [ Marc Deslauriers ]
  * Fix regression when handling test failures

  [ Antonio Terceiro ]
  * Add unit test for regression fix when handling test failures

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 03 Dec 2013 21:26:35 -0300

gem2deb (0.6.0) unstable; urgency=low

  * gem2tgz: fix full path handling when generating tarball name
    (Closes: #730854)
  * Don't interpolate path in regular expression when loading templates.
    This fixes the build when the source directory contains regular
    expression metacharacters such as '+' (Closes: #730854)
  * debian/control: add versioned build-depends on ruby-mocha (Closes: #730690)
  * Ignore non-installed interpreters.
    This will ease backports of gem2deb without also having to backport the
    interpreters supported in unstable. (Closes: #730694)

 -- Antonio Terceiro <terceiro@debian.org>  Mon, 02 Dec 2013 09:49:30 -0300

gem2deb (0.5.1) unstable; urgency=low

  * Don't interpolate arguments for shell commands.
    This fixes handling of files with weird characters in their names such
    as ")" and whitespace in general, and improves security against
    maliciously-crafted filenames which could inject unwanted shell
    commands in the system that is building a package with gem2deb.
    (Closes: #729981)

 -- Antonio Terceiro <terceiro@debian.org>  Wed, 20 Nov 2013 16:19:46 -0300

gem2deb (0.5.0) unstable; urgency=low

  * Drop Ruby 1.8 support
  * Add Ruby 2.0 support
  * Centralize references to supported Ruby versions to make it dead simple to
    remove/add new ones.
  * Run tests in verbose mode during package build

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 03 Sep 2013 23:42:41 -0300

gem2deb (0.4.1) unstable; urgency=low

  * Give up on deprecating DH_RUBY_USE_DH_AUTO_INSTALL_DESTDIR
  * Improve documentation on multi-binary packages
  * Make extension buidler honor DH_RUBY_USE_DH_AUTO_INSTALL_DESTDIR
    (Closes: #701716)
  * Fix native extensions support for multi-binary packages
  * Update docs on Build-Depends for multi-binary source packages.
    For multi-binary packages with native extensions, gem2deb (>= 0.4.1~) is
    required.
  * Bump standards version to 3.9.4; no changes needed.

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 01 Jun 2013 22:46:10 -0300

gem2deb (0.4.0) unstable; urgency=low

  [ Cédric Boutillier ]
  * debian/control: remove obsolete DM-Upload-Allowed flag
  * use canonical URI in Vcs-* fields
  * fix typos in gem2deb and dh_ruby manpages.
    Thanks Francesco Poli (Closes: #691132, #691133)
  * filter out non Ruby files when creating test-ruby-files.yaml
    (Closes: #691236)
  * dh-make-ruby: suggest same copyright as original package in generated
    debian/copyright

  [ Antonio Terceiro ]
  * Added support for multi-binary source packages. See dh_ruby(1) for
    details.
  * Install CHANGELOG* as upstream changelog (Closes: #702160)

 -- Antonio Terceiro <terceiro@debian.org>  Thu, 30 May 2013 18:25:25 -0300

gem2deb (0.3.1) unstable; urgency=low

  [ Antonio Terceiro ]
  * remove unused constant
  * Remove DM-Upload-Allowed from d/control template (Closes: #692152)

  [ Cédric Boutillier ]
  * d/control template: bump Standards-Version; point VCS fields to anonscm.d.o

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 07 May 2013 19:15:17 -0300

gem2deb (0.3.0) unstable; urgency=low

  * Fix debug test mode
  * Install gemspec for use with rubygems-integration

 -- Antonio Terceiro <terceiro@debian.org>  Fri, 22 Jun 2012 09:43:33 -0300

gem2deb (0.2.17) unstable; urgency=low

  * Eliminate annoying warnings when running gem2deb/dh_ruby
    + Only force default external encoding if absolutely required.
    + Drop workaround for Rubygems/YAML issue.

 -- Antonio Terceiro <terceiro@debian.org>  Thu, 14 Jun 2012 22:05:39 -0300

gem2deb (0.2.16) unstable; urgency=low

  * Assume that any external files are UTF-8. Closes: #676192

 -- Antonio Terceiro <terceiro@debian.org>  Tue, 05 Jun 2012 15:25:09 -0300

gem2deb (0.2.15) unstable; urgency=low

  * dh_ruby: read debian/control as UTF-8, not ASCII. Closes: #675974

 -- Lucas Nussbaum <lucas@debian.org>  Mon, 04 Jun 2012 23:06:19 +0200

gem2deb (0.2.14) unstable; urgency=low

  [ Antonio Terceiro ]
  * New release.
  * Fix documentation of require-rubygems.overrides
  * Changed all shebangs from ruby.8 to ruby
  * debian/control:
    + Bump Standards version for gem2deb itself and for generated packages
    + add dependency on `ruby | ruby-interpreter`

  [ Per Andersson ]
  * Depend on rubygems instead of transitional package rubygems1.8.
    (Closes: #654234)
  * Correct typo in dh_ruby man page.

  [ Cédric Boutillier ]
  * use official DEP5 copyright formal url in templates

 -- Antonio Terceiro <terceiro@debian.org>  Sun, 03 Jun 2012 12:05:14 -0300

gem2deb (0.2.13) unstable; urgency=low

  [ Cédric Boutillier ]
  * Use Gem.load_yaml to require yaml, in order to ensure the definition of
    the constant Gem::SyckDefaultKey, required by newer versions of rubygems.

  [ Antonio Terceiro ]
  * debian/control: adjust (Build-)Depends: to require the newest versions of
    Rubygems.

 -- Antonio Terceiro <terceiro@debian.org>  Mon, 26 Dec 2011 10:55:41 -0200

gem2deb (0.2.12) unstable; urgency=low

  * Added myself to uploaders
  * Keep Lintian happy: gen-ruby-trans-pkgs sets transitional packages to
    "Priority: extra"

 -- Gunnar Wolf <gwolf@debian.org>  Tue, 22 Nov 2011 19:13:05 -0600

gem2deb (0.2.11) unstable; urgency=low

  * Fix crash when removing duplicate files in subdirectories, e.g.
    ${vendordir}/foo/bar.rb versus ${vendorarchdir}/foo/bar.rb. This was
    found when trying to update libldap-ruby into a new ruby-ldap package.
  * Do not compress Ruby code examples

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 05 Nov 2011 23:05:57 -0200

gem2deb (0.2.10) unstable; urgency=low

  [ Antonio Terceiro ]
  * If all Rubies are supported, use `/usr/bin/env ruby` as shebang
    line.

  [ Dmitry Borodaenko ]
  * Don't rewrite shebangs of non-Ruby scripts

 -- Antonio Terceiro <terceiro@debian.org>  Sat, 24 Sep 2011 12:17:38 -0700

gem2deb (0.2.9) unstable; urgency=low

  [ Cédric Boutillier ]
  * Do not skip tests after failing one

  [ Antonio Terceiro ]
  * Bug fix upload.
  * Split templates in their own files. This fixes the build on Ruby 1.9 under
    the `C` locale.

 -- Antonio Terceiro <terceiro@debian.org>  Sun, 18 Sep 2011 01:04:43 -0700

gem2deb (0.2.8) unstable; urgency=low

  * Generate a non-lintian-clean copyright file
  * Fix --only-tarball option
  * Fix typo in integration test
  * Keep upstream names that are not valid Debian package names
  * Make tests more portable
  * Rename test_helper samples file
  * Make tests pass under Ruby 1.9 as well
  * Run tests under 1.8 and 1.9 during build
  * Make sure that programs without shebangs get one
  * Keep correct permission bits on rewritten programs
  * Rewrite shebangs before running tests

 -- Antonio Terceiro <terceiro@debian.org>  Sun, 11 Sep 2011 13:29:03 -0700

gem2deb (0.2.7) unstable; urgency=low

  * Fix .so/.rb name clash resolution for the case of multiple binary
    packages.

 -- Antonio Terceiro <terceiro@debian.org>  Thu, 11 Aug 2011 12:05:47 -0700

gem2deb (0.2.6) unstable; urgency=low

  * Added Gem2Deb::Rake::TestTask for helping running tests using rake. See
    dh_ruby(1)
  * Install symlinks for .rb files masked by .so files
  * Support multi-binary packages by allowing maintainers to tell dh_ruby to
    install files at the place designated by dh_auto_install, usually
    debian/tmp. See dh_ruby(1) for details. (Closes: #632553)
  * Document files and environment variables used by dh_ruby in its manpage
    (Closes: #625797)

 -- Antonio Terceiro <terceiro@debian.org>  Thu, 21 Jul 2011 10:56:24 -0700

gem2deb (0.2.5) unstable; urgency=low

  * Replace libshoulda-ruby1.8 for ruby-shoulda-context in Build-Depends
  * Always create installation dirs (Closes: #630738)
  * gen-ruby-trans-pkgs: use Breaks: instead of Conflicts for transitional
    packages.

 -- Antonio Terceiro <terceiro@softwarelivre.org>  Sun, 19 Jun 2011 19:32:00 -0700

gem2deb (0.2.4) unstable; urgency=low

  [ Lucas Nussbaum ]
  * Set the team as maintainer, move myself to Uploaders.

  [ Vincent Fourmond ]
  * Add myself to uploaders
  * Add a rubysetuprb build system for debhelper to build packages with
    setup.rb

  [ Lucas Nussbaum ]
  * Merge Ubuntu-specific change which is harmless on Debian.

  [ Antonio Terceiro ]
  * Do not crash when package creates subdirectories in /usr/bin
    (Closes: #629036)
  * Shut up on commented 'require "rubygems"' lines (Closes: #628704)

 -- Antonio Terceiro <terceiro@softwarelivre.org>  Mon, 06 Jun 2011 10:33:11 -0700

gem2deb (0.2.3) unstable; urgency=low

  [ Daigo Moriwaki ]
  * Escape including the .git directory in a tar archive.
  * debuild friendly logging.

  [ Antonio Terceiro ]
  * Extract method to read the supported Ruby versions
  * Packages generated by dh-make-ruby now depend on 'ruby | ruby-interpreter'
    by default
  * Correct handling of shebangs: packages with 'all' in XS-Ruby-Versions use
    #!/usr/bin/ruby as shebang; packages for specific versions use the
    corresponding binary in the shebang.
  * Now debian/ruby-tests.rake is also supported for for running package tests.
  * debian/control: bump Standards-Version to 3.9.2

 -- Antonio Terceiro <terceiro@softwarelivre.org>  Tue, 10 May 2011 19:28:23 -0700

gem2deb (0.2.2) unstable; urgency=low

  * Fix generation of Vcs-Browser.
  * Add support for env-var DH_RUBY_GEMSPEC to specify the .gemspec.
  * Support running dh-make-ruby over a directory.
  * Fix: don't create native packages by default.
  * Remove identical duplicate files installed by rubygems in the
    arch-specific dir.

 -- Lucas Nussbaum <lucas@lucas-nussbaum.net>  Wed, 13 Apr 2011 23:12:50 +0200

gem2deb (0.2.1) unstable; urgency=low

  * Export RUBY_TEST_VERSION and RUBY_TEST_BIN environment variables
    when running tests.
  * Run make distclean || make clean instead of just make clean
  * When building extensions, run the test suite for a given version immediately
    after building the extension for this version. The previous behaviour
    resulted in testing each ruby implementation with the last extension to be
    built.
  * Add bin/gen-ruby-trans-pkgs: script to generate debian/control snippets
    for transitional packages

 -- Lucas Nussbaum <lucas@lucas-nussbaum.net>  Sun, 03 Apr 2011 14:36:10 +0200

gem2deb (0.2.0) unstable; urgency=low

  * Many, many changes to how gem2deb generates Debian packages:
    + Put everything in the same binary package.
    + Rewrite depends after dh_shlibdeps to create ORed deps.
    + Support building only for specific ruby versions.
    + Rename library files to match the Ruby convention
    + Add --package option to gem2deb and dh-make-ruby, to specify the
      name of the package to generate
    + Generate packages that depend on ruby1.8 | ruby-interpreter.
    + gem2tgz gemname now downloads the gem if needed.
    + Generate a better debian/copyright template.
    + Add a dh7 sequence.
  * Add Vcs-* fields after moving to PRE repo
  * Support DEB_BUILD_OPTIONS=nocheck.
  * Add perl:Depends, reorganize Depends:
  * Switch to 3.0 (native)
  * Other bugfixes and code cleanup

 -- Lucas Nussbaum <lucas@lucas-nussbaum.net>  Fri, 25 Mar 2011 09:29:56 +0100

gem2deb (0.1.0) experimental; urgency=low

  * Initial release.

 -- Lucas Nussbaum <lucas@lucas-nussbaum.net>  Fri, 04 Mar 2011 09:59:56 +0100
